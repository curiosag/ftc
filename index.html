<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>gFTC</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h2>Fusion Tables Console</h2>
        <p></p>

		<ul>
        	 <li> <a target="_blank" href="https://github.com/curiosag/ftcBin/zipball/master">Packaged JARs <strong>ZIP File</strong></a></li>
        	 <li> <a target="_blank" href="https://github.com/curiosag/ftcBin/tarball/master">Packaged JARs <strong>TAR Ball</strong></a></li>
          <li> <a target="_blank" href="https://github.com/curiosag/ftc/tarball/master">Source Code<strong>TAR Ball</strong></a></li>          
        </ul>

        <p class="view">View on <a target="_blank" href="https://github.com/curiosag/ftc"> GitHub </small></a></p>

      </header>
      
      <section>
      For a quick start with Google  <a target="_blank" href="https://developers.google.com/fusiontables/docs/v2/sql-reference">fusion tables sql</a>: 
      syntax highlighting, syntactic and semantic error markers, content assist, refer to tables by name or ID. Delete, rename and copy tables by sql, export csv. 
      Can be used with graphical UI or command line mode, also available as <a href="http://curiosag.github.io/ftc/eclipsePlugin.html">Eclipse plugin</a>.
      
      </section>


      
 <wide_section>
<br>
    
 <img src="ftc.gif" width="825" height="548" alt=""> 
        <p></p>
<br>
<br>

<h3>Get started</h3>
You need  <a target="_blank" href="https://support.google.com/fusiontables">some fusion tables you own</a> or some  <a target="_blank" href="https://research.google.com/tables?hl=en&ei=xYqhVpuCJsHipQOqzLiIDw&corpus=fusion&q=dog">external table IDs</a>, a  <a target="_blank" href="https://console.developers.google.com">google developers project</a> with  <a target="_blank" href="https://console.developers.google.com/apis"> activated fusion tables api</a> and an  <a target="_blank" href="https://console.developers.google.com/apis/credentials"> <a target="_blank" href="https://console.developers.google.com/apis/credentials">OAuth2 client ID</a></a> (with application type "other") for the project. </small>
<p></p>Download the packaged JAR archive, extract it, run ftc.bat (Windows), ftc.sh (make sure it is executable) for unix-like systems or "java -jar ftcClientJava-0.1.jar" otherwise. Requires Java 7.

<p></p>Enter client id and secret, then press  <img src="authButton.gif" alt="authenticate">. The authentication workflow will try to open your default browser and take you through further steps. If it doesen't show up, you can find the required URL in the log pane, proceed manually in this case. If anything goes wrong with the authentication, the client waits for the defined timeout period and then cancels. In case of success the client stores the credentials and authenticates automatically in future sessions.
        <p></p>Once authenticated create a new .sql or .fts file and open it with the Fusion Tables editor. Press ctrl+space in the empty editor window for a list of top level Sql statements.
<p></p>
<h3>Covers</h3>
        <p></p>
      SELECT, CREATE VIEW, INSERT, UPDATE, DELETE, DESCRIBE and SHOW TABLES.
<p></p>
For tables owned by yourself you can use table names instead of table IDs. Make sure, there are no naming collisions. Alt+F5 outputs the query text with table name replaced by table Id, given there is any Id for that name.
<p></p>
The client accepts some usual Sql terms not covered by Fusion Tables Sql and translates them to api calls. UPDATE and DELETE are augmented, they accept the same &lt;filter_condition&gt; as SELECT ({ WHERE &lt;filter_condition&gt; | &lt;spatial_condition&gt; { AND &lt;filter_condition&gt; }* }).
 <p></p>
      <h3>Extended commands</h3>
      
<table>
<tr><td>Command</td><td>Syntax</td><td>Comment</td></tr>
<tr><td>Rename table</td><td>ALTER TABLE [table name or ID] RENAME TO [new name]</td><td>Atomic</td></tr>
<tr><td>Delete table</td><td>DROP TABLE  [table name or ID]</td><td>Atomic</td></tr>
<tr><td>Copy table</td><td>CREATE TABLE [table name] AS SELECT * FROM [source table name or ID] </td><td>Composite: copy, rename. If rename fails, the name of the new table defaults to "Copy of [original name]"</td></tr>
<tr><td>UPDATE</td><td>UPDATE TABLE [table name or ID] &lt;filter_condition&gt; </td><td>Composite: select ROWIDs for &lt;filter_condition&gt;, 1 update per ROWID.</td></tr>
<tr><td>DELETE</td><td>DELETE FROM [table name or ID] { &lt;filter_condition&gt; }</td><td>Composite:  select ROWIDs for &lt;filter_condition&gt;, 1 delete per ROWID.</td></tr>
</table>

<h3>Commands and Shortcuts</h3>
<table>

<tr><td>F5</td><td>Execute query under cursor</td></tr>
<tr><td>Ctrl+F5</td><td>Cancel query execution</td></tr>
<tr><td>Alt+F5</td><td>View preprocessed query. Table name replaced by table Id and in case of SELECT added OFFSET and LIMIT clauses, if not defined anyway.</td></tr>
<tr><td>F7</td><td>Execute all queries sequentially</td></tr>
<tr><td>F12</td><td>Focus editor text field</td></tr>
<tr><td>Ctrl+space</td><td>Trigger code completion. Switch between proposed Sql snippets and table or column names</td></tr>
<tr><td>Alt+left</td><td>Browse command history backwards</td></tr>
<tr><td>Alt+right</td><td>Browse command history forward</td></tr>
<tr><td>Alt+M</td><td>Memorize editor text ... means, append it to the command history without executing the query</td></tr>
<tr><td>Ctrl+T</td><td>Show tables</td></tr>
<tr><td>Ctrl+E</td><td>Export to csv file</td></tr>
<tr><td>Ctrl+S</td><td>Save editor text</td></tr>
<tr><td>Ctrl+O</td><td>Open file</td></tr>
</table>

<h3>Command line mode</h3>
<p>
You can pass query source- and optionally result destination file names as command line parameters using ftc.sh (didn't bother myself with ftc.bat yet in this regard). Execution goes on without gui then. Command line execution relies on previously stored authentication credentials. Looks like this:

<br><br>ftc.sh [&#60;query source file&#62; [&#60;result data destination file&#62;]]
</p>

<h3><a name="limitations"></a>Limitations</h3>
        <ul>
        	<li>Some augmented operations are composites and not  <a target="_blank" href="https://www.youtube.com/watch?v=1Tko1G6XRiQ" > atomic </a>. 
        	E.g. "create table as select" in fact is "copy table" followed by "rename". Say copy succeed, still rename may fail for whatever reason. This leaves a copy with the default name: "Copy of [original name]". Issue another rename in this case. UPDATE and DELETE for multiple ROWIDs may fail anytime in between leaving the operation incomplete, but potentially repeatable. Another issue here is limited possibility for query parallelization. Only 2 threads do this now and give you occasional "503 - service not available" errors, which become more frequent with more threads. Covered by a retry mechanism, until success or manual cancellation. </li>
        	 <li>Column ids can be used in queries, but they are not covered by semantic highlighting, so you get a blue wiggle line for them.</li>
        	 <li>Keyword "AS" is mandatory in definitions of table aliases. </li>
        	 <li>Handling huge amounts of data isn't the focus of the implementation nor of the Sql interface. That said, it may take you as far as the network, the computer's memory and the fusion tables service allows it to.</li>
			 <li>Snippets aren't supported for each and every corner, just for the major cases: top level statements (SELECT, UPDATE...), &lt;column_spec&gt; including aggregate operations, GROUP BY, ORDER BY and WHERE clauses. Completion may behave a bit surprising in certain situations. If you're editing around the end of a statement, just adding a terminal ";" at the end of it in order to enable the parser to produce something reasonable may be of help.</li>
<li>Single snippets can't be nested. E.g. if you use the SELECT snippet, parameter replacement only offers table and field names. You can not use another aggregate statement in the &lt;column_specs&gt;s or add a WHERE clause. Exit the parameter completion and toggle another snippet  in order to do so.</li>
			 <li>I guess the snippet aproach to Sql ran into its limits with the create view statement involving joins.</li>
			 <li>The plugin uses the Java preference storage mechanism rather than the one of Eclipse.</li>
        </ul>

<h3>Google throttling</h3>

<p>	When you start to see thinkgs like	"403 Forbidden - Rate Limit Exceeded" that are <a href="https://groups.google.com/forum/#!topic/fusion-tables-users-group/09XRxSJsOh8"> access limitations imposed by Google</a>. It's really obnoxious, though understandable, rendered parallel query execution almost useless and made a retry mechanism mandatory.</p>
<table>
<tr><td>Table API</td><td>200 queries per day</td></tr>
<tr><td>SQL API</td><td>5 queries per second for read requests per user account or per IP, whichever comes first</td></tr>
<tr><td></td><td>30 queries per minute for more successful write requests</td></tr>
</table>
<p>
Can look like this then:<br><br>
<b>08:55:51</b> running: 'UPDATE classifiedAds SET statusPredicted = 0 WHERE statusPredicted = '';'<br>
08:55:52 Composite queries being processed.<br>
08:55:52 Queued UPDATE 310 times<br>
09:06:21 Executed query in <b>629.443 seconds</b>. 1 records returned<br>
<b>09:06:21</b> 310 of 310 composite queries processed<br>
</p>
</li>


<h3>Open Issues</h3>
Find the <a target="_blank" href="https://github.com/curiosag/ftc/issues">list at GitHub</a>.        
 <p></p>

<h3>Credits</h3>
<a href="http://www.famfamfam.com/">Silk icon set</a> by Mark James.<br>
<a href="https://sourceforge.net/projects/rsyntaxtextarea/">RSyntaxTextArea Editor</a> and auto complete components by Robert Futrell<br>
<em>Google Fusion Tablesâ„¢ service</em> is a trademark of Google Inc.
 
      </wide_section>

<div>
      <footer>
        <p>This project is maintained by  <a target="_blank" href="https://github.com/curiosag">curiosag</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by  <a target="_blank" href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>


    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
